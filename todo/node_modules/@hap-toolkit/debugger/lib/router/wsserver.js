"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSocketServer=createSocketServer;var _socket=_interopRequireDefault(require("socket.io")),_sharedUtils=require("@hap-toolkit/shared-utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createSocketServer(e,r){const o=(0,_socket.default)(e);r.context.io=o,o.on("connection",e=>{o.on("error",e=>{_sharedUtils.colorconsole.error(`### App Socket Server ### websocket server发生错误: ${e.message}`)}),_sharedUtils.colorconsole.info(`### App Socket Server ### websocket用户(${(0,_sharedUtils.stripPrefixForIPV4MappedIPV6Address)(e.conn.remoteAddress)})连入到websocket server`),e.on("disconnect",()=>{_sharedUtils.colorconsole.info("### App Socket Server ### websocket client与websocket server断开"),o.emit("user disconnected")})})}
//# sourceMappingURL=wsserver.js.map
