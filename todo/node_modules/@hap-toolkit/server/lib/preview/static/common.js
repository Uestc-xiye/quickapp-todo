base = typeof base === 'undefined' ? '/preview' : base
var eventsource = new EventSource('/preview/__stream')
eventsource.addEventListener('reload', page => {
  // page.data: 快应用页面router page，空值为默认模式
  window.sessionStorage.removeItem('system.router.params')
  window.sessionStorage.removeItem('routes')
  const path = page.data
  if (path) {
    location.replace(`${base}/${path}`)
  } else {
    location.replace(base)
  }
})
eventsource.onerror = function(evt) {
  console.log('EventSource error', evt)
}